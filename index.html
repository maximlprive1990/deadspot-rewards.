<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deadspot Mining Game</title>
<style>
  body {
    background:#0d0d0d;
    color:#ccc;
    font-family:Consolas, monospace;
    margin:0; padding:0;
    display:flex; flex-direction:column; align-items:center;
  }
  header {
    width:100%; background:#111; padding:10px; text-align:center; border-bottom:1px solid #333;
  }
  .stats { display:flex; justify-content:space-around; width:100%; background:#1a1a1a; padding:10px; border-bottom:1px solid #333; }
  .stats div { text-align:center; }
  #gameArea { display:flex; width:100%; justify-content:space-around; margin-top:10px; flex-wrap:wrap; }
  .card { background:#1a1a1a; border:1px solid #333; border-radius:8px; padding:10px; margin:5px; flex:1; min-width:250px; min-height:250px; }
  button { background:#222; color:#0f0; border:1px solid #333; border-radius:5px; padding:6px 10px; margin:4px; cursor:pointer; }
  button:hover { background:#333; }
  #clickBtn { width:120px; height:120px; border-radius:50%; background:url('https://i.ibb.co/9n7wqR7/skull-new.png') center/cover; border:3px solid #666; margin-bottom:10px; }

  /* Popup Miner Interface */
  #minerPopup {
    position:fixed; top:50%; left:50%; transform:translate(-50%, -50%);
    width:600px; max-width:90%; background:#111; border:2px solid #0f0; border-radius:10px;
    display:none; flex-direction:column; padding:20px; z-index:1000;
  }
  #minerPopup h2 { margin:0 0 10px 0; text-align:center; color:#0f0; }
  #minerPopup table { width:100%; border-collapse:collapse; font-size:12px; margin-bottom:10px; }
  #minerPopup th, #minerPopup td { border:1px solid #333; padding:4px; text-align:center; }
  #minerPopup button.closePopup { background:#0f0; color:#000; margin-top:10px; }

  #overlay {
    display:none; position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.7); z-index:900;
  }
</style>
</head>
<body>

<header>
  <h1>ðŸ’€ Deadspot Mining Game</h1>
  <div id="clock"></div>
</header>

<div class="stats">
  <div>XP: <span id="xp">0</span></div>
  <div>Niveau: <span id="level">1</span></div>
  <div>Ã‰nergie: <span id="energy">100</span></div>
  <div>Deadspot: <span id="deadspot">0</span></div>
  <div>Diamants: <span id="diamonds">0</span></div>
</div>

<div id="gameArea">
  <div class="card" style="text-align:center">
    <button id="clickBtn"></button>
    <p>Click pour miner âš¡</p>
  </div>
  <div class="card">
    <h3>CPU Mining</h3>
    <button onclick="openMinerPopup()">ðŸ’» Ouvrir Interface Miner</button>
  </div>
</div>

<!-- Overlay + Popup -->
<div id="overlay"></div>
<div id="minerPopup">
  <h2>ðŸ’» Miner Control Panel</h2>
  <table>
    <tr><th>H/s</th><th>Total</th><th>AcceptÃ©s</th><th>RejetÃ©s</th><th>Threads</th><th>Throttle</th></tr>
    <tr>
      <td id="mpHs">0</td>
      <td id="mpTotal">0</td>
      <td id="mpAccepted">0</td>
      <td id="mpRejected">0</td>
      <td><span id="mpThreads">0</span></td>
      <td><span id="mpThrottle">0%</span></td>
    </tr>
  </table>
  <label>Threads: <input type="number" id="threadInput" min="1" max="16" value="4"></label>
  <label>CPU Throttle: <input type="range" id="throttleInput" min="0" max="1" step="0.05" value="0.3"></label>
  <div style="margin-top:10px;">
    <button onclick="startMining()">DÃ©marrer</button>
    <button onclick="stopMining()">ArrÃªter</button>
    <button class="closePopup" onclick="closeMinerPopup()">Fermer</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/mintme-miner-js"></script>
<script>
// Clock
function updateClock(){document.getElementById('clock').innerText=new Date().toLocaleString('fr-CA',{timeZone:'America/Toronto'});}
setInterval(updateClock,1000);

// Popup control
function openMinerPopup(){document.getElementById('minerPopup').style.display='flex'; document.getElementById('overlay').style.display='block';}
function closeMinerPopup(){document.getElementById('minerPopup').style.display='none'; document.getElementById('overlay').style.display='none';}

// Miner object
let miner=null;
function startMining(){
  const threads=parseInt(document.getElementById('threadInput').value);
  const throttle=parseFloat(document.getElementById('throttleInput').value);
  if(!miner){
    miner=new Client.Anonymous("TON_SITE_KEY", {threads:threads, throttle:throttle, autoThreads:false});
  }
  miner.setNumThreads(threads);
  miner.setThrottle(throttle);
  miner.start(Client.FORCE_MULTI_TAB);
  logMiner("Miner dÃ©marrÃ© avec "+threads+" threads et throttle "+(throttle*100)+"%");
}
function stopMining(){if(miner){miner.stop(); logMiner("Miner arrÃªtÃ©");}}

// Logs and stats update
function logMiner(msg){console.log(msg);}
setInterval(()=>{
  if(miner && miner.isRunning()){
    document.getElementById('mpHs').innerText=miner.getHashesPerSecond().toFixed(2);
    document.getElementById('mpTotal').innerText=miner.getTotalHashes();
    document.getElementById('mpAccepted').innerText=miner.getAcceptedHashes();
    document.getElementById('mpRejected').innerText=Math.floor(Math.random()*2); // simulate rejected
    document.getElementById('mpThreads').innerText=miner.getNumThreads();
    document.getElementById('mpThrottle').innerText=(miner.getThrottle()*100).toFixed(0)+"%";
  }
},1000);
</script>

</body>
</html>

