<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rewards Airdrop Mining</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body { font-family: Arial; background: #121212; color: #fff; }
.container { max-width: 400px; margin: 50px auto; }
input, button { width: 100%; padding: 10px; margin: 5px 0; }
button { background: #ff7700; border: none; color: #fff; cursor: pointer; }
button:hover { opacity: 0.9; }
.highlight { color: orange; font-weight: bold; }
</style>
</head>
<body>
<div class="container">
<h2>Connexion / Inscription</h2>

<div id="auth">
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Mot de passe">
<button onclick="signup()">S'inscrire</button>
<button onclick="login()">Se connecter</button>
</div>

<div id="dashboard" style="display:none;">
<h3>Bienvenue <span id="userEmail"></span></h3>
<p>Bonus: <span id="userBonus">0</span></p>
<button onclick="logout()">Se dÃ©connecter</button>
</div>
</div>

<script>
// ðŸ”¶ Remplace ces valeurs par tes informations Supabase
const supabaseUrl = "ðŸ”¶https://YOUR_SUPABASE_URL.supabase.coðŸ”¶";
const supabaseKey = "ðŸ”¶YOUR_SUPABASE_KEYðŸ”¶";

const supabase = Supabase.createClient(supabaseUrl, supabaseKey);

async function signup() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    const { data, error } = await supabase.auth.signUp({
        email: email,
        password: password
    });

    if (error) alert(error.message);
    else alert('Inscription rÃ©ussie ! VÃ©rifiez votre email pour confirmer.');
}

async function login() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    const { data, error } = await supabase.auth.signInWithPassword({
        email: email,
        password: password
    });

    if (error) alert(error.message);
    else loadDashboard(data.user);
}

async function loadDashboard(user) {
    document.getElementById('auth').style.display = 'none';
    document.getElementById('dashboard').style.display = 'block';
    document.getElementById('userEmail').innerText = user.email;

    // ðŸ”¶ RÃ©cupÃ©rer le bonus depuis Supabase
    const { data: userData } = await supabase
        .from('users')
        .select('*')
        .eq('email', user.email)
        .single();
    document.getElementById('userBonus').innerText = userData?.bonus || 0;
}

async function logout() {
    await supabase.auth.signOut();
    document.getElementById('auth').style.display = 'block';
    document.getElementById('dashboard').style.display = 'none';
}

// ðŸ”¶ Exemple pour ajouter un bonus
async function addBonus(userId, bonusAmount) {
    const { data, error } = await supabase
        .from('users')
        .update({ bonus: supabase.rpc('increment_bonus', { value: bonusAmount }) })
        .eq('id', userId);
    if (error) console.log(error);
    else console.log('Bonus ajoutÃ© !', data);
}

// ðŸ”¶ Exemple pour ajouter une transaction
async function addTransaction(userId, type, amount) {
    const { data, error } = await supabase
        .from('transactions')
        .insert([{ user_id: userId, type: type, amount: amount }]);
    if (error) console.log(error);
    else console.log('Transaction enregistrÃ©e !', data);
}
</script>
</body>
</html>
